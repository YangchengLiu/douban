angular.module("movieCat",["ui.router","route","commonModule","in_theatersModule","coming_soonModule","searchModule","top250Module","navBarModule"]),angular.module("route",[]).config(["$stateProvider","$urlRouterProvider","$sceDelegateProvider",function(e,t,o){e.state({url:"/in_theaters/:page",templateUrl:"views/in_theaters/in_theaters.html",name:"in_theaters",controller:"in_theatersCtrl"}).state({url:"/coming_soon/:page",templateUrl:"views/coming_soon/coming_soon.html",name:"coming_soon",controller:"coming_soonCtrl"}).state({url:"/top250/:page",templateUrl:"views/top250/top250.html",name:"top250",controller:"top250Ctrl"}).state({url:"/search/:page/:keyword",templateUrl:"views/search/search.html",name:"search",controller:"searchCtrl"}),t.otherwise("/in_theaters/1")}]),angular.module("commonModule",[]).service("myService",function(){this.myJsonp=function(e,t,o){var a="myJsonp_"+Math.random().toString().replace(".","");window[a]=o;var n="";for(var r in t)n+=r+"="+t[r]+"&";var l=document.createElement("script");l.src=e+"?"+n+"callback="+a,l.onload=function(){document.body.removeChild(l)},document.body.appendChild(l)}}),angular.module("coming_soonModule",[]).controller("coming_soonCtrl",["$scope","$http","myService","$stateParams","$location",function(e,t,o,a,n){var r=a.page,l=12*(r-1),c=0;o.myJsonp("https://api.douban.com/v2/movie/coming_soon",{count:12,start:l},function(t){e.result=t,c=Math.ceil(t.total/12),e.$apply()}),e.changePage=function(e){"next"==e?++r>c&&(r=c):"prev"==e&&--r<1&&(r=1),n.path("/coming_soon/"+r)}}]),angular.module("in_theatersModule",[]).controller("in_theatersCtrl",["$scope","$http","myService","$stateParams","$location",function(e,t,o,a,n){var r=a.page,l=12*(r-1),c=0;o.myJsonp("https://api.douban.com/v2/movie/in_theaters",{count:12,start:l},function(t){e.result=t,c=Math.ceil(t.total/12),e.$apply()}),e.changePage=function(e){"next"==e?++r>c&&(r=c):"prev"==e&&--r<1&&(r=1),n.path("/in_theaters/"+r)}}]),angular.module("navBarModule",[]).controller("navBarCtrl",["$scope","$location",function(e,t){e.search=function(){t.path("/search/1/"+e.keyword),e.keyword=""}}]),angular.module("searchModule",[]).controller("searchCtrl",["$scope","$stateParams","myService","$location",function(e,t,o,a){var n=t.keyword,r=t.page,l=12*(r-1),c=0;o.myJsonp("https://api.douban.com/v2/movie/search",{q:n,count:12,start:l},function(t){e.result=t,c=Math.ceil(t.total/12),e.$apply()}),e.changePage=function(e){"next"==e?++r>c&&(r=c):"prev"==e&&--r<1&&(r=1),a.path("/search/"+r+"/"+n)}}]),angular.module("top250Module",[]).controller("top250Ctrl",["$scope","$http","myService","$stateParams","$location",function(e,t,o,a,n){var r=a.page,l=12*(r-1),c=0;o.myJsonp("https://api.douban.com/v2/movie/top250",{count:12,start:l},function(t){e.result=t,c=Math.ceil(t.total/12),e.$apply()}),e.changePage=function(e){"next"==e?++r>c&&(r=c):"prev"==e&&--r<1&&(r=1),n.path("/top250/"+r)}}]);